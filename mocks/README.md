# 面试系统 Mock API 服务器

这是一个简易的Mock API服务器，用于测试前端面试系统的功能。服务器模拟了所有需要的后端接口，让您可以在没有真实后端的情况下完整测试前端功能。

## 🚀 快速启动

### 1. 安装依赖

在 `frontend/mocks` 目录下运行：

```bash
npm install
```

### 2. 启动服务器

```bash
npm start
```

或者使用开发模式（支持热重载）：

```bash
npm run dev
```

服务器将在 `http://localhost:8000` 启动。

### 3. 启动前端应用

在主项目目录（`frontend`）下运行：

```bash
npm start
```

前端应用将在 `http://localhost:3000` 启动。

## 📋 API 接口

### 用户认证

- **POST /login** - 用户登录
- **POST /register** - 用户注册

### 简历分析

- **POST /analyze-resume** - 上传并分析PDF简历

### 面试流程

- **POST /interview/start** - 开始面试
- **POST /interview/submit-answer** - 提交面试回答
- **GET /interview/summary/:sessionId** - 获取面试总结

### 其他

- **GET /health** - 健康检查

## 🔑 测试账号

预设的测试账号：

- **用户名**: `testuser`
- **密码**: `123456`
- **邮箱**: `test@example.com`

您也可以通过注册功能创建新的测试账号。

## 📝 功能特性

### 1. 用户认证系统
- JWT Token 认证
- 用户登录/注册
- 自动token验证和刷新

### 2. 简历分析
- 支持PDF文件上传
- 模拟简历解析和分析
- 返回技能评估和建议

### 3. 面试流程
- 支持多个面试方向选择
- 动态生成面试问题
- 语音转文字支持
- 视频录制上传
- 实时面试状态管理

### 4. 面试评估
- 自动评分算法
- 技术和沟通能力评估
- 详细反馈和建议
- 面试总结报告

## 🔧 配置说明

### 端口配置
- Mock服务器端口: `8000`
- 前端应用端口: `3000`

### CORS配置
服务器已配置允许来自以下地址的请求：
- `http://localhost:3000`
- `http://127.0.0.1:3000`

### 文件上传限制
- 最大文件大小: 100MB
- 支持格式: PDF（简历分析）

## 📁 项目结构

```
mocks/
├── package.json        # 依赖配置
├── server.js          # 主服务器文件
└── README.md          # 说明文档
```

## 🛠️ 开发说明

### 添加新的接口

1. 在 `server.js` 中添加新的路由
2. 实现相应的业务逻辑
3. 返回符合前端预期的数据格式

### 修改问题库

在 `generateQuestions()` 函数中的 `questionBank` 对象中添加或修改问题。

### 自定义评分算法

在 `generateInterviewSummary()` 函数中修改评分逻辑。

## 🐛 故障排除

### 端口冲突
如果8000端口被占用，请修改 `server.js` 中的 `PORT` 变量。

### CORS错误
确保前端应用运行在3000端口，或在服务器的CORS配置中添加新的地址。

### 依赖安装失败
尝试删除 `node_modules` 文件夹后重新安装：

```bash
rm -rf node_modules
npm install
```

## 📊 数据存储

当前版本使用内存存储，服务器重启后数据会丢失。生产环境建议使用数据库存储。

- 用户数据: 存储在 `users` 数组中
- 面试会话: 存储在 `interviewSessions` Map中

## 🎯 测试建议

1. **登录测试**: 使用预设账号或注册新账号
2. **简历分析**: 上传任意PDF文件测试分析功能
3. **面试流程**: 完整体验从开始到结束的面试流程
4. **错误处理**: 测试各种异常情况的处理

## 📈 性能说明

- 简历分析模拟2秒处理时间
- 支持并发面试会话
- 自动清理过期数据（可扩展）

## 🔐 安全说明

⚠️ **注意**: 这是一个测试用的Mock服务器，不适用于生产环境。实际部署时需要考虑：

- 密码加密存储
- 更强的JWT密钥
- 输入验证和过滤
- 文件上传安全检查
- 数据库事务处理 